#
# SPEC file for Lintel
#
Name:           Lintel
Version:        __VERSION__
URL:            http://tesla.hpl.hp.com/opensource.html
Source:         %{name}-%{version}.tar.gz
Release:        1
Summary:        Support tools and library 
Group:          Libraries
License:        BSD
Packager:	HPL SSD Software <software@cello.hpl.hp.com>
BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

%description
A collection of libraries and tools.

%package	libs
Summary:        Lintel library files
Group:          Libraries
Requires:       %{name}-libs = %{version}-%{release}
Requires:       pkgconfig
License:        BSD

%package	devel
Summary:        Lintel devel files
Group:          Development/Libraries
Requires:       %{name}-devel = %{version}-%{release}
Requires:       pkgconfig
License:        BSD

%description	libs
Lintel libraries

%description	devel
Lintel header files

%prep
%setup -q

%build
autoreconf --install
mkdir build
cd build
../configure --prefix=/usr --enable-optmode=optimize --libdir=%{_libdir}
cp Makefile Makefile.old
sed -e 's;^linteldocdir =.*;linteldocdir = %{_docdir}/Lintel-%{version};' Makefile.old > Makefile
make

%install
cd build
rm -rf $RPM_BUILD_ROOT
make install DESTDIR=$RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT%{_docdir}/Lintel-%{version}
cp ../Release.info $RPM_BUILD_ROOT%{_docdir}/Lintel-%{version}/Release.info
cp ../Changelog.mtn $RPM_BUILD_ROOT%{_docdir}/Lintel-%{version}/Changelog.mtn

%clean
rm -rf $RPM_BUILD_ROOT

%files
%{_bindir}/batch-parallel
%{_bindir}/buildTcl
%{_bindir}/calcStats
%{_bindir}/drawRandomLogNormal
%{_bindir}/lintel-acinclude
%{_bindir}/lintel-config
%{_bindir}/mercury-plot
/usr/share/bp_modules/BatchParallel/checksum.pm
/usr/share/bp_modules/BatchParallel/common.pm
/usr/share/bp_modules/BatchParallel/compress.pm
/usr/share/bp_modules/BatchParallel/jobsfile.pm
/usr/share/perl5/Lintel/Net/SSH/KnownHostsFile.pm
/usr/share/perl5/Plot/Mercury.pm
/usr/share/perl5/Plot/Mercury/Tics.pm
/usr/share/perl5/Text/Expand.pm
/usr/share/perl5/Text/ExpandInt.pm
%{_docdir}/Lintel-%{version}/COPYING
%{_docdir}/Lintel-%{version}/Release.info
%{_docdir}/Lintel-%{version}/Changelog.mtn

%files devel
%{_includedir}/Lintel/AssertBoost.H
%{_includedir}/Lintel/AssertException.H
%{_includedir}/Lintel/Clock.H
%{_includedir}/Lintel/CompilerMarkup.H
%{_includedir}/Lintel/ConstantString.H
%{_includedir}/Lintel/Deque.H
%{_includedir}/Lintel/Double.H
%{_includedir}/Lintel/HashMap.H
%{_includedir}/Lintel/HashTable.H
%{_includedir}/Lintel/HashUnique.H
%{_includedir}/Lintel/LeastSquares.hpp
%{_includedir}/Lintel/LintelAssert.H
%{_includedir}/Lintel/LintelVersion.H
%{_includedir}/Lintel/MathSpecialFunctions.H
%{_includedir}/Lintel/Matrix.H
%{_includedir}/Lintel/MersenneTwisterRandom.H
%{_includedir}/Lintel/PThread.H
%{_includedir}/Lintel/Posix.H
%{_includedir}/Lintel/PriorityQueue.H
%{_includedir}/Lintel/Stats.H
%{_includedir}/Lintel/StatsEMA.H
%{_includedir}/Lintel/StatsHistogram.H
%{_includedir}/Lintel/StatsMaker.H
%{_includedir}/Lintel/StatsQuantile.H
%{_includedir}/Lintel/StatsRW.H
%{_includedir}/Lintel/StatsSequence.H
%{_includedir}/Lintel/StatsSeries.H
%{_includedir}/Lintel/StatsSeriesGroup.H
%{_includedir}/Lintel/StringUtil.H
%{_includedir}/Lintel/Uncompress.H
%{_includedir}/Lintel/streamcompat.H
/usr/share/aclocal/com_hp_hpl_lintel.m4
%{_libdir}/Make.common
%{_libdir}/Make.world
%{_libdir}/libLintel.a
%{_libdir}/libLintel.la
%{_libdir}/libLintel.so.0.0.0
%{_libdir}/libLintel.so.0
%{_libdir}/libLintel.so
%{_libdir}/libLintelPThread.a
%{_libdir}/libLintelPThread.la
/usr/share/cmake-modules/FindLibXmlpp.cmake
/usr/share/cmake-modules/FindLintel.cmake
/usr/share/packaging/redhat-rules

%files libs
%{_libdir}/libLintel.so.0.0.0
%{_libdir}/libLintel.so.0
%{_libdir}/libLintel.so
%{_libdir}/libLintelPThread.so.0.0.0
%{_libdir}/libLintelPThread.so.0
%{_libdir}/libLintelPThread.so

%changelog

* Thu Nov 15 2007 software@cello.hpl.hp.com
- fixed up relocatable bits

*Wed Mar  28 2007 software@cello.hpl.hp.com
- added .so symlinks

* Thu Mar 22 2007 software@cello.hpl.hp.com
- corrected license, changed version to datestamp

* Fri Mar 02 2007 software@cello.hpl.hp.com
- cmake modules added 

* Wed Feb 14 2007 software@cello.hpl.hp.com
- Initial RPM release.
make
